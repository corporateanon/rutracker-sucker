"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.clusterizeResults = void 0;

var _lodash = _interopRequireDefault(require("lodash"));

var clustering = require('density-clustering');

var average = function average(items) {
  if (!items.length) {
    return 0;
  }

  return items.reduce(function (sum, item) {
    sum += item.seeds;
    return sum;
  }, 0) / items.length;
};

var clusterizeResults = function clusterizeResults(items) {
  var seedsDataset = items.map(function (item) {
    return [item.seeds];
  });
  var kmeans = new clustering.KMEANS();
  var clusters = kmeans.run(seedsDataset, 2);
  var orderedClusters = (0, _lodash["default"])(clusters).map(function (indexCluster) {
    return (0, _lodash["default"])(indexCluster).map(function (i) {
      return items[i];
    }).orderBy(['seeds'], ['desc']).value();
  }).orderBy([average], ['desc']).value();
  return orderedClusters;
};

exports.clusterizeResults = clusterizeResults;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jbHVzdGVyaXplLXJlc3VsdHMudHMiXSwibmFtZXMiOlsiY2x1c3RlcmluZyIsInJlcXVpcmUiLCJhdmVyYWdlIiwiaXRlbXMiLCJsZW5ndGgiLCJyZWR1Y2UiLCJzdW0iLCJpdGVtIiwic2VlZHMiLCJjbHVzdGVyaXplUmVzdWx0cyIsInNlZWRzRGF0YXNldCIsIm1hcCIsImttZWFucyIsIktNRUFOUyIsImNsdXN0ZXJzIiwicnVuIiwib3JkZXJlZENsdXN0ZXJzIiwiaW5kZXhDbHVzdGVyIiwiaSIsIm9yZGVyQnkiLCJ2YWx1ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0FBQ0EsSUFBTUEsVUFBVSxHQUFHQyxPQUFPLENBQUMsb0JBQUQsQ0FBMUI7O0FBSUEsSUFBTUMsT0FBTyxHQUFHLFNBQVZBLE9BQVUsQ0FBQ0MsS0FBRCxFQUF3QztBQUNwRCxNQUFJLENBQUNBLEtBQUssQ0FBQ0MsTUFBWCxFQUFtQjtBQUNmLFdBQU8sQ0FBUDtBQUNIOztBQUNELFNBQ0lELEtBQUssQ0FBQ0UsTUFBTixDQUFhLFVBQUNDLEdBQUQsRUFBTUMsSUFBTixFQUFlO0FBQ3hCRCxJQUFBQSxHQUFHLElBQUlDLElBQUksQ0FBQ0MsS0FBWjtBQUNBLFdBQU9GLEdBQVA7QUFDSCxHQUhELEVBR0csQ0FISCxJQUdRSCxLQUFLLENBQUNDLE1BSmxCO0FBTUgsQ0FWRDs7QUFZTyxJQUFNSyxpQkFBaUIsR0FBRyxTQUFwQkEsaUJBQW9CLENBQUNOLEtBQUQsRUFBZ0M7QUFDN0QsTUFBTU8sWUFBWSxHQUFHUCxLQUFLLENBQUNRLEdBQU4sQ0FBVSxVQUFBSixJQUFJO0FBQUEsV0FBSSxDQUFDQSxJQUFJLENBQUNDLEtBQU4sQ0FBSjtBQUFBLEdBQWQsQ0FBckI7QUFDQSxNQUFNSSxNQUFNLEdBQUcsSUFBSVosVUFBVSxDQUFDYSxNQUFmLEVBQWY7QUFDQSxNQUFNQyxRQUFRLEdBQUdGLE1BQU0sQ0FBQ0csR0FBUCxDQUFXTCxZQUFYLEVBQXlCLENBQXpCLENBQWpCO0FBQ0EsTUFBTU0sZUFBZSxHQUFHLHdCQUFFRixRQUFGLEVBQ25CSCxHQURtQixDQUVoQixVQUFBTSxZQUFZO0FBQUEsV0FBbUMsd0JBQUVBLFlBQUYsRUFDdENOLEdBRHNDLENBQ2xDLFVBQUNPLENBQUQ7QUFBQSxhQUFlZixLQUFLLENBQUNlLENBQUQsQ0FBcEI7QUFBQSxLQURrQyxFQUV0Q0MsT0FGc0MsQ0FFOUIsQ0FBQyxPQUFELENBRjhCLEVBRW5CLENBQUMsTUFBRCxDQUZtQixFQUd0Q0MsS0FIc0MsRUFBbkM7QUFBQSxHQUZJLEVBT25CRCxPQVBtQixDQU9YLENBQUNqQixPQUFELENBUFcsRUFPQSxDQUFDLE1BQUQsQ0FQQSxFQVFuQmtCLEtBUm1CLEVBQXhCO0FBU0EsU0FBT0osZUFBUDtBQUNILENBZE0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuY29uc3QgY2x1c3RlcmluZyA9IHJlcXVpcmUoJ2RlbnNpdHktY2x1c3RlcmluZycpO1xuXG5pbXBvcnQgeyBTZWFyY2hSZXN1bHQgfSBmcm9tICcuL3N1Y2tlcic7XG5cbmNvbnN0IGF2ZXJhZ2UgPSAoaXRlbXM6IEFycmF5PFNlYXJjaFJlc3VsdD4pOiBudW1iZXIgPT4ge1xuICAgIGlmICghaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgICBpdGVtcy5yZWR1Y2UoKHN1bSwgaXRlbSkgPT4ge1xuICAgICAgICAgICAgc3VtICs9IGl0ZW0uc2VlZHM7XG4gICAgICAgICAgICByZXR1cm4gc3VtO1xuICAgICAgICB9LCAwKSAvIGl0ZW1zLmxlbmd0aFxuICAgICk7XG59O1xuXG5leHBvcnQgY29uc3QgY2x1c3Rlcml6ZVJlc3VsdHMgPSAoaXRlbXM6IEFycmF5PFNlYXJjaFJlc3VsdD4pID0+IHtcbiAgICBjb25zdCBzZWVkc0RhdGFzZXQgPSBpdGVtcy5tYXAoaXRlbSA9PiBbaXRlbS5zZWVkc10pO1xuICAgIGNvbnN0IGttZWFucyA9IG5ldyBjbHVzdGVyaW5nLktNRUFOUygpO1xuICAgIGNvbnN0IGNsdXN0ZXJzID0ga21lYW5zLnJ1bihzZWVkc0RhdGFzZXQsIDIpO1xuICAgIGNvbnN0IG9yZGVyZWRDbHVzdGVycyA9IF8oY2x1c3RlcnMpXG4gICAgICAgIC5tYXAoXG4gICAgICAgICAgICBpbmRleENsdXN0ZXIgPT4gPEFycmF5PFNlYXJjaFJlc3VsdD4+KDx1bmtub3duPl8oaW5kZXhDbHVzdGVyKVxuICAgICAgICAgICAgICAgICAgICAubWFwKChpOiBudW1iZXIpID0+IGl0ZW1zW2ldKVxuICAgICAgICAgICAgICAgICAgICAub3JkZXJCeShbJ3NlZWRzJ10sIFsnZGVzYyddKVxuICAgICAgICAgICAgICAgICAgICAudmFsdWUoKSlcbiAgICAgICAgKVxuICAgICAgICAub3JkZXJCeShbYXZlcmFnZV0sIFsnZGVzYyddKVxuICAgICAgICAudmFsdWUoKTtcbiAgICByZXR1cm4gb3JkZXJlZENsdXN0ZXJzO1xufTtcbiJdfQ==